package cc.unknown.module.impl.exploit;

import cc.unknown.event.impl.api.EventLink;
import cc.unknown.event.impl.packet.PacketEvent;
import cc.unknown.event.impl.packet.PacketType;
import cc.unknown.module.Module;
import cc.unknown.module.impl.ModuleCategory;
import cc.unknown.module.setting.impl.BooleanValue;
import cc.unknown.module.setting.impl.SliderValue;
import cc.unknown.utils.client.AdvancedTimer;
import cc.unknown.utils.player.PlayerUtil;

public class PacketLogger extends Module {
	
    public BooleanValue server = new BooleanValue("Server", false);
    public BooleanValue client = new BooleanValue("Client", false);
	private SliderValue delay = new SliderValue("Delay", 100, 0, 300, 1);
	private AdvancedTimer timer = new AdvancedTimer(0);
    
	public PacketLogger() {
		super("PacketLogger", ModuleCategory.Exploit);
		this.registerSetting(delay, server, client);
	}
	
    @EventLink
    public void onPacket(PacketEvent e) {
    	if (timer.hasTimeElapsed(delay.getInputToLong(), true)) {
	        if(e.getType() == PacketType.Receive && !server.isToggled()) return;
	        if(e.getType() == PacketType.Send && !client.isToggled()) return;
	        PlayerUtil.send(" " + e.getPacket().getClass().getSimpleName());
    	}
    }
}
